#pragma once

#include "exchange_basic.h"
#include "g_terminal.h"

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

struct _delta_offer
{
	int price;
	int delta_number;
};

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

struct _delta_offers
{
	_delta_offer delta_offer[size_offer];
	i64 size;
};

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

struct _delta_number
{
	int old_number;
	int new_number;
};

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

struct _delta_offers2
{
	std::vector<_delta_number> delta_number;
	int start_price;
	int delta_price;

	_delta_offers2(const _offers& a, const _offers& b);
};

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

struct _delta_supply_and_demand // предложение и спрос
{
	_delta_offers delta_demand; // желающие купить
	_delta_offers delta_supply; // желающие продать

	_delta_supply_and_demand(const _supply_and_demand& a, const _supply_and_demand& b); // =a-b
};

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

struct _delta_supply_and_demand2 // изменение предложения и спроса
{
	_delta_offers2 delta_demand; // желающие купить
	_delta_offers2 delta_supply; // желающие продать

	_delta_supply_and_demand2(const _supply_and_demand& a, const _supply_and_demand& b);
};

_delta_supply_and_demand2 operator-(const _supply_and_demand& a, const _supply_and_demand& b);

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void exchange_fun1(_g_terminal* t);
void exchange_fun2(_g_terminal* t);

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
